"""
–û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
"""
import streamlit as st
from config import APP_CONFIG
from state.session import state
from components.navigation import navigation_buttons, sidebar_navigation
from steps import step_upload, step_preprocessing, step_transformation

def init_app():
    """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"""
    st.set_page_config(
        page_title=APP_CONFIG['title'],
        page_icon=APP_CONFIG['icon'],
        layout=APP_CONFIG['layout'],
        initial_sidebar_state=APP_CONFIG['initial_sidebar_state']
    )

def main():
    """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"""
    init_app()
    sidebar_navigation()
    st.title("üìä –ê–Ω–∞–ª–∏–∑ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤")
    navigation_buttons()
    
    if state.get('step') == 1:
        st.subheader("–®–∞–≥ 1. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö")
        step_upload.run_step()
    elif state.get('step') == 2:
        step_preprocessing.run_step()
    elif state.get('step') == 3:
        step_transformation.run_step()

if __name__ == "__main__":
    main()